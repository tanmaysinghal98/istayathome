{"ast":null,"code":"import _slicedToArray from\"/Users/tanmaysinghal98/Development/isah/isah-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useState,useEffect}from'react';import axios from'axios';import'../styles/Common.css';import'../styles/ImageUpload.css';var ImageShare=function ImageShare(props){var challenge=props.challenge,user=props.user;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),imageDownload=_useState2[0],setImageDownload=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];useEffect(function(){var completedChallenge=user.challengesCompleted.find(function(compChal){return compChal.challengeId===challenge.id;});var data={'key':completedChallenge.achievementImageKey};axios.post('/image/download',data).then(function(response){return setImageDownload(response.data);}).catch(function(err){return console.log(err);});},[challenge,user]);useEffect(function(){if(imageDownload.url!==undefined&&imageDownload.url!==null){console.log(\"hi\");fetch(imageDownload.url).then(function(response){return response.blob();}).then(function(blob){var file=new File([blob],'download.jpg',{type:\"image/jpg\"});// console.log(blob);\nsetImage(file);});}},[imageDownload]);useEffect(function(){console.log(image);},[image]);var share=function share(){if(navigator.share){navigator.share({title:'web.dev',text:'Check out web.dev.',url:'https://web.dev/'}).then(function(){return console.log('Successful share');}).catch(function(error){return console.log('Error sharing',error);});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-md-center description-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-preview\"},image?/*#__PURE__*/React.createElement(\"img\",{src:window.URL.createObjectURL(image),width:\"50%\",className:\"image-preview\"}):null))),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-md-center description-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 col-md-6 text-center\"},Object.keys(imageDownload).length===0?/*#__PURE__*/React.createElement(\"button\",{className:\"button-rounded-black-disabled text-large\",disabled:true},\"Share\"):/*#__PURE__*/React.createElement(\"button\",{className:\"button-rounded-black text-large\",onClick:share},\"Share\"))));};export default ImageShare;","map":{"version":3,"sources":["/Users/tanmaysinghal98/Development/isah/isah-frontend/src/components/ImageShare.js"],"names":["React","useCallback","useState","useEffect","axios","ImageShare","props","challenge","user","imageDownload","setImageDownload","image","setImage","completedChallenge","challengesCompleted","find","compChal","challengeId","id","data","achievementImageKey","post","then","response","catch","err","console","log","url","undefined","fetch","blob","file","File","type","share","navigator","title","text","error","window","URL","createObjectURL","Object","keys","length"],"mappings":"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","sourcesContent":["import React, {useCallback, useState, useEffect} from 'react';\nimport axios from 'axios';\nimport '../styles/Common.css';\nimport '../styles/ImageUpload.css'\n\nconst ImageShare = (props) => {\n    const {challenge, user} = props;\n    const [imageDownload, setImageDownload] = useState({});\n    const [image, setImage] = useState(null);\n\n    useEffect(() => {\n        var completedChallenge = user.challengesCompleted.find(compChal => compChal.challengeId === challenge.id)\n        var data = {\n            'key': completedChallenge.achievementImageKey\n        }\n        axios.post('/image/download', data)\n            .then(response => setImageDownload(response.data))\n            .catch(err => console.log(err))\n    }, [challenge, user])\n\n    useEffect(() => {\n        if (imageDownload.url !== undefined && imageDownload.url !== null) {\n            console.log(\"hi\")\n            fetch(imageDownload.url)\n            .then(response => response.blob())\n            .then(blob => {\n                let file = new File([blob], 'download.jpg', { type: \"image/jpg\" });\n                // console.log(blob);\n                setImage(file)\n            })\n        }\n    }, [imageDownload])\n\n    useEffect(() => {\n        console.log(image)\n    }, [image])\n\n    const share = () => {\n        if (navigator.share) {\n            navigator.share({\n                title: 'web.dev',\n                text: 'Check out web.dev.',\n                url: 'https://web.dev/',\n            })\n            .then(() => console.log('Successful share'))\n            .catch((error) => console.log('Error sharing', error));\n        }\n    }\n\n    return (\n        <>\n            <div className='row justify-content-md-center description-box'>\n                <div className='col-sm-12 col-md-6'>\n                    <div className='image-preview'>\n                        {image ? \n                        <img src={window.URL.createObjectURL(image)} width='50%' className='image-preview'/>\n                        : null}\n                    </div>\n                </div>\n            </div>\n            <div className='row justify-content-md-center description-box'>\n                <div className='col-sm-12 col-md-6 text-center'>\n                    {Object.keys(imageDownload).length === 0? \n                        <button className='button-rounded-black-disabled text-large' disabled>Share</button>:\n                        <button className='button-rounded-black text-large' onClick={share}>Share</button>\n                    }\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ImageShare;"]},"metadata":{},"sourceType":"module"}