{"ast":null,"code":"var _jsxFileName = \"/Users/tanmaysinghal98/Development/isah/isah-frontend/src/components/ImageShare.js\";\nimport React, { useCallback, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/Common.css';\nimport '../styles/ImageUpload.css';\n\nconst ImageShare = props => {\n  const {\n    challenge,\n    user\n  } = props;\n  const [imageDownload, setImageDownload] = useState({});\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    var completedChallenge = user.challengesCompleted.find(compChal => compChal.challengeId === challenge.id);\n    var data = {\n      'key': completedChallenge.achievementImageKey\n    };\n    axios.post('/image/download', data).then(response => setImageDownload(response.data)).catch(err => console.log(err));\n  }, [challenge, user]);\n  useEffect(() => {\n    if (imageDownload.url !== undefined && imageDownload.url !== null) {\n      console.log(\"hi\");\n      fetch(imageDownload.url, {\n        mode: 'no-cors'\n      }).then(response => response.blob()).then(blob => {\n        let file = new File([blob], 'download.jpg', {\n          type: \"image/jpg\"\n        }); // console.log(blob);\n      });\n    }\n  }, [imageDownload]);\n  useEffect(() => {// console.log(image)\n  }, [image]);\n\n  const share = () => {\n    if (navigator.share) {\n      navigator.share({\n        title: 'web.dev',\n        text: 'Check out web.dev.',\n        url: 'https://web.dev/'\n      }).then(() => console.log('Successful share')).catch(error => console.log('Error sharing', error));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-md-center description-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"image-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, image ? /*#__PURE__*/React.createElement(\"img\", {\n    src: window.URL.createObjectURL(image),\n    width: \"50%\",\n    className: \"image-preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }) : null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-md-center description-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, Object.keys(imageDownload).length === 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-rounded-black-disabled text-large\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, \"Share\") : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button-rounded-black text-large\",\n    onClick: share,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 25\n    }\n  }, \"Share\"))));\n};\n\nexport default ImageShare;","map":{"version":3,"sources":["/Users/tanmaysinghal98/Development/isah/isah-frontend/src/components/ImageShare.js"],"names":["React","useCallback","useState","useEffect","axios","ImageShare","props","challenge","user","imageDownload","setImageDownload","image","setImage","completedChallenge","challengesCompleted","find","compChal","challengeId","id","data","achievementImageKey","post","then","response","catch","err","console","log","url","undefined","fetch","mode","blob","file","File","type","share","navigator","title","text","error","window","URL","createObjectURL","Object","keys","length"],"mappings":"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","sourcesContent":["import React, {useCallback, useState, useEffect} from 'react';\nimport axios from 'axios';\nimport '../styles/Common.css';\nimport '../styles/ImageUpload.css'\n\nconst ImageShare = (props) => {\n    const {challenge, user} = props;\n    const [imageDownload, setImageDownload] = useState({});\n    const [image, setImage] = useState(null);\n\n    useEffect(() => {\n        var completedChallenge = user.challengesCompleted.find(compChal => compChal.challengeId === challenge.id)\n        var data = {\n            'key': completedChallenge.achievementImageKey\n        }\n        axios.post('/image/download', data)\n            .then(response => setImageDownload(response.data))\n            .catch(err => console.log(err))\n    }, [challenge, user])\n\n    useEffect(() => {\n        if (imageDownload.url !== undefined && imageDownload.url !== null) {\n            console.log(\"hi\")\n            fetch(imageDownload.url, {mode: 'no-cors'})\n            .then(response => response.blob())\n            .then(blob => {\n                let file = new File([blob], 'download.jpg', { type: \"image/jpg\" });\n                // console.log(blob);\n            })\n        }\n    }, [imageDownload])\n\n    useEffect(() => {\n        // console.log(image)\n    }, [image])\n\n    const share = () => {\n        if (navigator.share) {\n            navigator.share({\n                title: 'web.dev',\n                text: 'Check out web.dev.',\n                url: 'https://web.dev/',\n            })\n            .then(() => console.log('Successful share'))\n            .catch((error) => console.log('Error sharing', error));\n        }\n    }\n\n    return (\n        <>\n            <div className='row justify-content-md-center description-box'>\n                <div className='col-sm-12 col-md-6'>\n                    <div className='image-preview'>\n                        {image ? \n                        <img src={window.URL.createObjectURL(image)} width='50%' className='image-preview'/>\n                        : null}\n                    </div>\n                </div>\n            </div>\n            <div className='row justify-content-md-center description-box'>\n                <div className='col-sm-12 col-md-6 text-center'>\n                    {Object.keys(imageDownload).length === 0? \n                        <button className='button-rounded-black-disabled text-large' disabled>Share</button>:\n                        <button className='button-rounded-black text-large' onClick={share}>Share</button>\n                    }\n                </div>\n            </div>\n        </>\n    )\n}\n\nexport default ImageShare;"]},"metadata":{},"sourceType":"module"}